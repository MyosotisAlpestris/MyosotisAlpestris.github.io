{{ if .Site.Params.enableGitalk }}
<div id="gitalk-container"></div>

<!-- Gitalk 样式 -->
<link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
<!-- 引入 md5.js 确保 id 长度合法 -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/blueimp-md5/2.18.0/js/md5.min.js"></script>

<script>
  const gitalk = new Gitalk({
    clientID: 'Ov23lihReHs2QCc2nXBO',
    clientSecret: 'aef9659b8ce57e67e52343d093797696abe1a36a',
    repo: 'MyosotisAlpestris.github.io',  
    owner: 'MyosotisAlpestris',
    admin: MyosotisAlpestris,
    id: md5(location.pathname).substr(0, 49), // 确保唯一性且符合 GitHub Issue 限制
    distractionFreeMode: false // 关闭无干扰模式
  });

  (function() {
    if (["localhost", "127.0.0.1"].includes(window.location.hostname)) {
      console.warn("Gitalk is disabled in local preview mode.");
    } else {
      gitalk.render('gitalk-container');
    }
  })();
</script>
{{ end }}
